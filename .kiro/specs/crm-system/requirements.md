# เอกสารข้อกำหนด

## บทนำ

เอกสารนี้กำหนดข้อกำหนดสำหรับระบบบริหารจัดการลูกค้าสัมพันธ์ (CRM) ที่ครอบคลุม เพื่อจัดการข้อมูลลูกค้า ติดตามสถานะ และมอบหมายงาน ระบบจะรองรับบทบาทผู้ใช้งาน 3 ประเภท (Admin, Supervisor, Sale) และใช้ระบบอัตโนมัติสำหรับการจัดการวงจรชีวิตลูกค้า รวมถึง "ตะกร้าแจก" (ลูกค้าใหม่รอการมอบหมาย) และ "ตะกร้ารอ" (ลูกค้าเก่ารอการติดตาม) ตามเงื่อนไขเวลา 30 วัน และ 3 เดือน

## ข้อกำหนด

### ข้อกำหนดที่ 1: การจัดการผู้ใช้งานและการยืนยันตัวตน

**User Story:** ในฐานะผู้ดูแลระบบ ฉันต้องการจัดการบัญชีผู้ใช้งานที่มีบทบาทต่างกัน เพื่อที่ฉันจะสามารถควบคุมการเข้าถึงและสิทธิ์การใช้งานทั่วทั้งระบบ CRM

#### เกณฑ์การยอมรับ

1. เมื่อผู้ใช้พยายามเข้าสู่ระบบ ระบบจะต้องตรวจสอบข้อมูลประจำตัวที่เก็บไว้ในตาราง users
2. เมื่อผู้ใช้เข้าสู่ระบบสำเร็จ ระบบจะต้องบันทึก LastLoginDate
3. เมื่อสร้างผู้ใช้ใหม่ ระบบจะต้องกำหนดให้มี Username, Password, FirstName, LastName, Email, Phone, CompanyCode และ Position
4. หากผู้ใช้มีบทบาท Admin ระบบจะต้องอนุญาตให้เข้าถึงฟังก์ชันทั้งหมดของระบบ
5. หากผู้ใช้มีบทบาท Supervisor ระบบจะต้องอนุญาตให้เข้าถึงฟังก์ชันการจัดการทีมและรายงาน
6. หากผู้ใช้มีบทบาท Sale ระบบจะต้องอนุญาตให้เข้าถึงฟังก์ชันการจัดการลูกค้าและงาน

### ข้อกำหนดที่ 2: การจัดการข้อมูลลูกค้า

**User Story:** ในฐานะตัวแทนขาย ฉันต้องการจัดการข้อมูลลูกค้าอย่างครอบคลุม เพื่อที่ฉันจะสามารถติดตามรายละเอียดลูกค้า สถานะ และประวัติการติดต่อได้อย่างมีประสิทธิภาพ

#### เกณฑ์การยอมรับ

1. เมื่อนำเข้าข้อมูลลูกค้าจาก CSV ระบบจะต้องตรวจสอบหมายเลขโทรศัพท์ที่ซ้ำกันและอัปเดตข้อมูลที่มีอยู่หรือสร้างข้อมูลใหม่
2. เมื่อสร้างลูกค้าใหม่ ระบบจะต้องสร้าง CustomerCode ที่ไม่ซ้ำกัน
3. เมื่ออัปเดตข้อมูลลูกค้า ระบบจะต้องบันทึก ModifiedDate และ ModifiedBy
4. หากหมายเลขโทรศัพท์ลูกค้ามีอยู่แล้ว ระบบจะต้องอัปเดตข้อมูลลูกค้าที่มีอยู่แทนการสร้างข้อมูลซ้ำ
5. เมื่อสร้างลูกค้า ระบบจะต้องตั้งค่า CustomerStatus และ CartStatus เริ่มต้นอย่างเหมาะสม
6. เมื่อข้อมูลลูกค้าถูกแก้ไข ระบบจะต้องเก็บบันทึกการตรวจสอบพร้อมเวลาและข้อมูลผู้ใช้

### ข้อกำหนดที่ 3: การบันทึกการโทรและการติดตามการสื่อสาร

**User Story:** ในฐานะตัวแทนขาย ฉันต้องการบันทึกการสื่อสารกับลูกค้าทั้งหมด เพื่อที่ฉันจะสามารถติดตามประวัติการติดต่อและข้อกำหนดการติดตามได้

#### เกณฑ์การยอมรับ

1. เมื่อบันทึกการโทร ระบบจะต้องบันทึก CallDate, CallTime, CallMinutes, CallStatus และ CallReason
2. เมื่อสถานะการโทรเป็น "ติดต่อได้" ระบบจะต้องอนุญาตให้บันทึก TalkStatus และ TalkReason
3. เมื่อสถานะการโทรเป็น "ติดต่อไม่ได้" ระบบจะต้องกำหนดให้มี CallReason
4. เมื่อ TalkStatus เป็น "คุยจบ" ระบบจะต้องอนุญาตให้ใส่หมายเหตุเพิ่มเติม (ไม่บังคับ)
5. เมื่อ TalkStatus เป็น "คุยไม่จบ" ระบบจะต้องกำหนดให้มี TalkReason
6. เมื่อบันทึกการโทร ระบบจะต้องอัปเดตข้อมูลการติดต่อล่าสุดของลูกค้า

### ข้อกำหนดที่ 4: การจัดการคำสั่งซื้อและการติดตามการขาย

**User Story:** ในฐานะตัวแทนขาย ฉันต้องการบันทึกคำสั่งซื้อของลูกค้าและติดตามประวัติการขาย เพื่อที่ฉันจะสามารถจัดการกระบวนการขายและวงจรชีวิตลูกค้าได้

#### เกณฑ์การยอมรับ

1. เมื่อสร้างคำสั่งซื้อ ระบบจะต้องสร้าง DocumentNo ที่ไม่ซ้ำกัน
2. เมื่อบันทึกคำสั่งซื้อสำเร็จ ระบบจะต้องอัปเดต CustomerStatus ของลูกค้าเป็น "ลูกค้าเก่า"
3. เมื่อบันทึกคำสั่งซื้อ ระบบจะต้องเก็บข้อมูล DocumentDate, PaymentMethod, Products, Quantity และ Price
4. เมื่อสร้างคำสั่งซื้อ ระบบจะต้องอัปเดตฟิลด์ OrderDate ของลูกค้า
5. เมื่อลูกค้าสั่งซื้อ ระบบจะต้องเก็บบันทึกประวัติการขาย
6. เมื่อดูรายละเอียดลูกค้า ระบบจะต้องแสดงประวัติคำสั่งซื้อทั้งหมด

### ข้อกำหนดที่ 5: การจัดการงานและระบบติดตาม

**User Story:** ในฐานะตัวแทนขาย ฉันต้องการสร้างและจัดการงานติดตาม เพื่อที่ฉันจะสามารถมั่นใจในการติดต่อลูกค้าอย่างทันเวลาและไม่พลาดการนัดหมายที่สำคัญ

#### เกณฑ์การยอมรับ

1. เมื่อสร้างงาน ระบบจะต้องกำหนดให้มี CustomerCode, FollowupDate และ Remarks (ไม่บังคับ)
2. เมื่อดูงานประจำวัน ระบบจะต้องแสดงงานทั้งหมดที่กำหนดไว้สำหรับวันปัจจุบัน
3. เมื่อสร้างงาน ระบบจะต้องบันทึก CreatedDate และ CreatedBy
4. เมื่อดูรายละเอียดลูกค้า ระบบจะต้องแสดงงานที่เกี่ยวข้องทั้งหมด
5. เมื่องานครบกำหนด ระบบจะต้องแสดงให้เห็นในแดชบอร์ด
6. เมื่อจัดการงาน ระบบจะต้องอนุญาตให้กรองตามช่วงวันที่

### ข้อกำหนดที่ 6: การจัดการวงจรชีวิตลูกค้าอัตโนมัติ

**User Story:** ในฐานะผู้ดูแลระบบ ฉันต้องการกฎอัตโนมัติในการจัดการการเปลี่ยนแปลงวงจรชีวิตลูกค้า เพื่อที่ลูกค้าจะได้รับการจัดหมวดหมู่และมอบหมายอย่างเหมาะสมตามกิจกรรมและระยะเวลา

#### เกณฑ์การยอมรับ

1. เมื่อลูกค้าใหม่ไม่มีการอัปเดตเป็นเวลา 30 วัน ระบบจะต้องย้ายพวกเขาไปยัง "ตะกร้าแจก"
2. เมื่อลูกค้าติดตามไม่มีคำสั่งซื้อเป็นเวลา 3 เดือน ระบบจะต้องย้ายพวกเขาไปยัง "ตะกร้ารอ"
3. เมื่อลูกค้าเก่าไม่ซื้อซ้ำเป็นเวลา 3 เดือน ระบบจะต้องย้ายพวกเขาไปยัง "ตะกร้ารอ"
4. เมื่อกฎอัตโนมัติทำงาน ระบบจะต้องอัปเดต CartStatus และเวลาที่เกี่ยวข้อง
5. เมื่อสถานะลูกค้าเปลี่ยนแปลงอัตโนมัติ ระบบจะต้องเก็บบันทึกการตรวจสอบ
6. เมื่อกระบวนการอัตโนมัติทำงาน ระบบจะต้องรันทุกวันผ่าน cron job

### ข้อกำหนดที่ 7: แดชบอร์ดและส่วนติดต่อผู้ใช้

**User Story:** ในฐานะตัวแทนขาย ฉันต้องการแดชบอร์ดที่ใช้งานง่ายพร้อมแท็บที่จัดระเบียบ เพื่อที่ฉันจะสามารถเข้าถึงหมวดหมู่ลูกค้าต่างๆ และจัดการงานประจำวันได้อย่างมีประสิทธิภาพ

#### เกณฑ์การยอมรับ

1. เมื่อเข้าถึงแดชบอร์ด ระบบจะต้องแสดง 5 แท็บ: "DO (นัดหมายวันนี้)", "ลูกค้าใหม่", "ลูกค้าติดตาม", "ลูกค้าเก่า" และ "Follow (ดูนัดหมายทั้งหมด)"
2. เมื่อคลิกแท็บ "DO" ระบบจะต้องแสดงงานทั้งหมดที่กำหนดไว้สำหรับวันนี้
3. เมื่อคลิกแท็บหมวดหมู่ลูกค้า ระบบจะต้องกรองและแสดงลูกค้าที่เกี่ยวข้อง
4. เมื่อดูรายชื่อลูกค้า ระบบจะต้องมีความสามารถในการค้นหาและกรอง
5. เมื่อเข้าถึงรายละเอียดลูกค้า ระบบจะต้องแสดงข้อมูลครอบคลุมรวมถึงประวัติคำสั่งซื้อ ประวัติการขาย บันทึกการโทร และฟอร์มจัดการงาน
6. เมื่อใช้งานส่วนติดต่อ ระบบจะต้องมีการออกแบบที่ตอบสนองสำหรับขนาดหน้าจอต่างๆ

### ข้อกำหนดที่ 8: การนำเข้าข้อมูลและการรวมระบบ

**User Story:** ในฐานะผู้ดูแลระบบ ฉันต้องการนำเข้าข้อมูลลูกค้าจากไฟล์ CSV เพื่อที่ฉันจะสามารถย้ายฐานข้อมูลลูกค้าที่มีอยู่และอัปเดตข้อมูลลูกค้าจำนวนมากได้อย่างมีประสิทธิภาพ

#### เกณฑ์การยอมรับ

1. เมื่อนำเข้าข้อมูล CSV ระบบจะต้องรองรับคอลัมน์: CallDate, CallTime, CallStatus, CustomerStatus, Note, Agriculture, LastOrderDate, PaymentMethod, Products, Quantity, Price, CustomerName, CustomerTel, CustomerAddress, CustomerProvince, CustomerPostalCode
2. เมื่อประมวลผลการนำเข้า CSV ระบบจะต้องตรวจสอบความไม่ซ้ำกันของหมายเลขโทรศัพท์
3. เมื่อนำเข้าข้อมูลลูกค้าที่มีอยู่ ระบบจะต้องอัปเดตข้อมูลคำสั่งซื้อสำหรับลูกค้าเก่า
4. เมื่อนำเข้าข้อมูลลูกค้าใหม่ ระบบจะต้องสร้างบันทึกลูกค้าใหม่
5. เมื่อกระบวนการนำเข้าเสร็จสิ้น ระบบจะต้องให้สรุปของบันทึกที่สร้าง/อัปเดต
6. เมื่อเกิดข้อผิดพลาดในการนำเข้า ระบบจะต้องให้รายงานข้อผิดพลาดที่ละเอียด

### ข้อกำหนดที่ 9: ประวัติการขายและการติดตามการมอบหมาย

**User Story:** ในฐานะหัวหน้างาน ฉันต้องการติดตามการมอบหมายตัวแทนขายและประวัติ เพื่อที่ฉันจะสามารถจัดการประสิทธิภาพทีมและความต่อเนื่องของความสัมพันธ์ลูกค้า

#### เกณฑ์การยอมรับ

1. เมื่อมอบหมายลูกค้าให้ตัวแทนขาย ระบบจะต้องบันทึกการมอบหมายในตาราง sales_histories
2. เมื่อลูกค้าถูกมอบหมายใหม่ ระบบจะต้องสิ้นสุดการมอบหมายก่อนหน้าและสร้างการมอบหมายใหม่
3. เมื่อดูรายละเอียดลูกค้า ระบบจะต้องแสดงประวัติตัวแทนขายทั้งหมด
4. เมื่อจัดการการมอบหมาย ระบบจะต้องติดตามข้อมูล StartDate, EndDate และ AssignBy
5. เมื่อสร้างรายงาน ระบบจะต้องให้ตัวชี้วัดประสิทธิภาพการขายตามตัวแทน
6. เมื่อความเป็นเจ้าของลูกค้าเปลี่ยนแปลง ระบบจะต้องเก็บบันทึกการตรวจสอบที่สมบูรณ์